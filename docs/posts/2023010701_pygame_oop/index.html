<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jörg Kantel">

<title>Der Schockwellenreiter - Pygame objektorientiert</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken"
  }
}</script>
<script data-goatcounter="https://kantel.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Der Schockwellenreiter</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">
 <span class="menu-text">Über den Schockwellenreiter</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kantel/kantel.github.io"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.social/@kantel"><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Pygame objektorientiert</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Pygame</div>
    <div class="quarto-category">Spieleprogrammierung</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor:in</div>
    <div class="quarto-title-meta-contents">
             <p>Jörg Kantel </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Veröffentlichungsdatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">7. Januar 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.flickr.com/photos/schockwellenreiter/52613076234/"><img src="images/pizzaplaneworldoop-b.jpg" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>Entgegen meiner ursprünglichen Absicht – ich wollte ja eigentlich mit <a href="http://cognitiones.kantel-chaos-team.de/multimedia/spieleprogrammierung/twine2.html">Twine</a> in mein <a href="http://blog.schockwellenreiter.de/2022/09/2022090601.html">Wunderland</a> abtauchen – habe ich mich heute doch noch einmal hingesetzt und mit <a href="http://cognitiones.kantel-chaos-team.de/multimedia/spieleprogrammierung/pygame.html">Pygame</a> gespielt. Denn letzte Nacht im Halbschlaf erinnerte ich mich daran, daß es ja meine ursprüngliche Absicht war, den Pizzaflieger in und mit einem sauberen, objektorientierten Framework zu implementieren und das war in der Begeisterung über das <a href="https://kantel.github.io/posts/2023010102_pizzaplane4/">bisher erreichte</a> völlig untergegangen.</p>
<p>Die Inspiration für diese Idee lieferte <a href="http://cognitiones.kantel-chaos-team.de/programmierung/creativecoding/greenfoot.html">Greenfoot</a>, eine ausbildungsorientierte Spiele-Entwicklungsumgebung, die durch eine konsequente Objektorientierung hervorsticht<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. So in etwa sollte dann auch mein Pygame-Framework aussehen.</p>
<p>Dazu habe ich erst einmal ein auf das Wesentliche reduzierte Pygame-Grundgerüst entwickelt:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a><span class="im">import</span> pygame</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="im">from</span> pygame.<span class="bu">locals</span> <span class="im">import</span> <span class="op">*</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="im">import</span> os, sys</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="im">from</span> random <span class="im">import</span> randint</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co"># Hier wird der Pfad zum Verzeichnis der Assets gesetzt</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>DATAPATH <span class="op">=</span> os.path.join(os.getcwd(), <span class="st">"data"</span>)</span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="co"># Konstanten deklarieren</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>WIDTH, HEIGHT <span class="op">=</span> <span class="dv">640</span>, <span class="dv">480</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>TITLE <span class="op">=</span> <span class="st">"🐍 Pygame Boilerplate 🐍"</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>FPS <span class="op">=</span> <span class="dv">60</span></span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="co"># Farben</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>BG_COLOR <span class="op">=</span> (<span class="dv">231</span>, <span class="dv">229</span>, <span class="dv">226</span>) <span class="co"># Sandgrau</span></span>
<span id="cb1-16"><a href="#cb1-16"></a>           </span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="co"># Pygame und das Fenster initialisieren</span></span>
<span id="cb1-18"><a href="#cb1-18"></a>clock <span class="op">=</span> pygame.time.Clock()</span>
<span id="cb1-19"><a href="#cb1-19"></a>pygame.init()</span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="co"># Ein übler Hack, um die Position des Fensters</span></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="co"># auf meinen zweiten Bildschirm zu setzen</span></span>
<span id="cb1-22"><a href="#cb1-22"></a>os.environ[<span class="st">'SDL_VIDEO_WINDOW_POS'</span>] <span class="op">=</span> <span class="st">"</span><span class="sc">%d</span><span class="st">,</span><span class="sc">%d</span><span class="st">"</span> <span class="op">%</span> (<span class="dv">1320</span>, <span class="dv">60</span>)</span>
<span id="cb1-23"><a href="#cb1-23"></a>screen <span class="op">=</span> pygame.display.set_mode((WIDTH, HEIGHT))</span>
<span id="cb1-24"><a href="#cb1-24"></a>pygame.display.set_caption(TITLE)</span>
<span id="cb1-25"><a href="#cb1-25"></a></span>
<span id="cb1-26"><a href="#cb1-26"></a></span>
<span id="cb1-27"><a href="#cb1-27"></a><span class="co"># Hauptschleife</span></span>
<span id="cb1-28"><a href="#cb1-28"></a>keep_going <span class="op">=</span> <span class="va">True</span></span>
<span id="cb1-29"><a href="#cb1-29"></a><span class="cf">while</span> keep_going:</span>
<span id="cb1-30"><a href="#cb1-30"></a>    </span>
<span id="cb1-31"><a href="#cb1-31"></a>    clock.tick(FPS)</span>
<span id="cb1-32"><a href="#cb1-32"></a>    <span class="cf">for</span> event <span class="kw">in</span> pygame.event.get():</span>
<span id="cb1-33"><a href="#cb1-33"></a>        <span class="cf">if</span> ((event.<span class="bu">type</span> <span class="op">==</span> pygame.QUIT)</span>
<span id="cb1-34"><a href="#cb1-34"></a>            <span class="kw">or</span> (event.<span class="bu">type</span> <span class="op">==</span> pygame.KEYDOWN</span>
<span id="cb1-35"><a href="#cb1-35"></a>            <span class="kw">and</span> event.key <span class="op">==</span> pygame.K_ESCAPE)):</span>
<span id="cb1-36"><a href="#cb1-36"></a>            keep_going <span class="op">=</span> <span class="va">False</span></span>
<span id="cb1-37"><a href="#cb1-37"></a>            <span class="bu">print</span>(<span class="st">"Bye, Bye, Baby!"</span>)</span>
<span id="cb1-38"><a href="#cb1-38"></a>            pygame.quit()</span>
<span id="cb1-39"><a href="#cb1-39"></a>            sys.exit()</span>
<span id="cb1-40"><a href="#cb1-40"></a>                           </span>
<span id="cb1-41"><a href="#cb1-41"></a>    screen.fill(BG_COLOR)</span>
<span id="cb1-42"><a href="#cb1-42"></a>    pygame.display.flip()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Das ist zwar lauffähig (und war bisher auch meine Vorlage), aber von der gewünschten Objektorientierung noch weit entfernt. Mir schwebte da so etwas wie in diesem Diagramm vor:</p>
<p><img src="images/gameworld.jpg" class="img-fluid"></p>
<p>Von Pygame abgeleitet wird die Spielewelt (<code>class GameWorld()</code>) und in dieser leben die Objekte, wie zum Beispiel der <code>Player()</code>. Diese Objekte sind wiederum Unterklassen der <code>class Sprite()</code>, die wiederum zu Pygame als Oberklasse gehört.</p>
<p>Also habe ich erst einmal die <code>GameWorld()</code> impementiert:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">class</span> GameWorld:</span>
<span id="cb2-2"><a href="#cb2-2"></a>    </span>
<span id="cb2-3"><a href="#cb2-3"></a>    <span class="kw">def</span> <span class="fu">__init__</span> (<span class="va">self</span>):</span>
<span id="cb2-4"><a href="#cb2-4"></a>        <span class="co"># Initialisiert die Spielewelt</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>        pygame.init()</span>
<span id="cb2-6"><a href="#cb2-6"></a>        <span class="co"># Ein übler Hack, um die Position des Fensters</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>        <span class="co"># auf meinen zweiten Bildschirm zu setzen</span></span>
<span id="cb2-8"><a href="#cb2-8"></a>        os.environ[<span class="st">'SDL_VIDEO_WINDOW_POS'</span>] <span class="op">=</span> <span class="st">"</span><span class="sc">%d</span><span class="st">,</span><span class="sc">%d</span><span class="st">"</span> <span class="op">%</span> (<span class="dv">1320</span>, <span class="dv">60</span>)</span>
<span id="cb2-9"><a href="#cb2-9"></a>        <span class="va">self</span>.screen <span class="op">=</span> pygame.display.set_mode((WIDTH, HEIGHT))</span>
<span id="cb2-10"><a href="#cb2-10"></a>        pygame.display.set_caption(TITLE)</span>
<span id="cb2-11"><a href="#cb2-11"></a>        <span class="va">self</span>.clock <span class="op">=</span> pygame.time.Clock()</span>
<span id="cb2-12"><a href="#cb2-12"></a>        <span class="va">self</span>.keep_going <span class="op">=</span> <span class="va">True</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>        </span>
<span id="cb2-14"><a href="#cb2-14"></a>    <span class="kw">def</span> reset(<span class="va">self</span>):</span>
<span id="cb2-15"><a href="#cb2-15"></a>        <span class="co"># Neustart oder Status zurücksetzen</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>        <span class="co"># Hier werden alle Elemente der GameWorld initialisiert</span></span>
<span id="cb2-17"><a href="#cb2-17"></a>        <span class="va">self</span>.all_sprites <span class="op">=</span> pygame.sprite.Group()</span>
<span id="cb2-18"><a href="#cb2-18"></a>        <span class="va">self</span>.player <span class="op">=</span> Player()</span>
<span id="cb2-19"><a href="#cb2-19"></a>        <span class="va">self</span>.all_sprites.add(<span class="va">self</span>.player)</span>
<span id="cb2-20"><a href="#cb2-20"></a>        <span class="va">self</span>.run()</span>
<span id="cb2-21"><a href="#cb2-21"></a></span>
<span id="cb2-22"><a href="#cb2-22"></a>    <span class="kw">def</span> run(<span class="va">self</span>):</span>
<span id="cb2-23"><a href="#cb2-23"></a>        <span class="co"># Hauptschleife des Spiels</span></span>
<span id="cb2-24"><a href="#cb2-24"></a>        <span class="cf">while</span> <span class="va">self</span>.keep_going:</span>
<span id="cb2-25"><a href="#cb2-25"></a>            <span class="va">self</span>.clock.tick(FPS)</span>
<span id="cb2-26"><a href="#cb2-26"></a>            <span class="va">self</span>.events()</span>
<span id="cb2-27"><a href="#cb2-27"></a>            <span class="va">self</span>.update()</span>
<span id="cb2-28"><a href="#cb2-28"></a>            <span class="va">self</span>.draw()</span>
<span id="cb2-29"><a href="#cb2-29"></a></span>
<span id="cb2-30"><a href="#cb2-30"></a>    <span class="kw">def</span> events(<span class="va">self</span>):</span>
<span id="cb2-31"><a href="#cb2-31"></a>        <span class="cf">for</span> event <span class="kw">in</span> pygame.event.get():</span>
<span id="cb2-32"><a href="#cb2-32"></a>            <span class="cf">if</span> ((event.<span class="bu">type</span> <span class="op">==</span> pygame.QUIT)</span>
<span id="cb2-33"><a href="#cb2-33"></a>                <span class="kw">or</span> (event.<span class="bu">type</span> <span class="op">==</span> pygame.KEYDOWN</span>
<span id="cb2-34"><a href="#cb2-34"></a>                <span class="kw">and</span> event.key <span class="op">==</span> pygame.K_ESCAPE)):</span>
<span id="cb2-35"><a href="#cb2-35"></a>                keep_going <span class="op">=</span> <span class="va">False</span></span>
<span id="cb2-36"><a href="#cb2-36"></a>                <span class="va">self</span>.game_over()</span>
<span id="cb2-37"><a href="#cb2-37"></a></span>
<span id="cb2-38"><a href="#cb2-38"></a>    <span class="kw">def</span> update(<span class="va">self</span>):</span>
<span id="cb2-39"><a href="#cb2-39"></a>        <span class="va">self</span>.all_sprites.update()</span>
<span id="cb2-40"><a href="#cb2-40"></a>    </span>
<span id="cb2-41"><a href="#cb2-41"></a>    <span class="kw">def</span> draw(<span class="va">self</span>):</span>
<span id="cb2-42"><a href="#cb2-42"></a>        <span class="va">self</span>.screen.fill(BG_COLOR)</span>
<span id="cb2-43"><a href="#cb2-43"></a>        <span class="va">self</span>.all_sprites.draw(<span class="va">self</span>.screen)</span>
<span id="cb2-44"><a href="#cb2-44"></a>        pygame.display.flip()</span>
<span id="cb2-45"><a href="#cb2-45"></a></span>
<span id="cb2-46"><a href="#cb2-46"></a>    <span class="kw">def</span> start_screen(<span class="va">self</span>):</span>
<span id="cb2-47"><a href="#cb2-47"></a>        <span class="cf">pass</span></span>
<span id="cb2-48"><a href="#cb2-48"></a>    </span>
<span id="cb2-49"><a href="#cb2-49"></a>    <span class="kw">def</span> win_screen(<span class="va">self</span>):</span>
<span id="cb2-50"><a href="#cb2-50"></a>        <span class="cf">pass</span></span>
<span id="cb2-51"><a href="#cb2-51"></a>    </span>
<span id="cb2-52"><a href="#cb2-52"></a>    <span class="kw">def</span> loose_screen(<span class="va">self</span>):</span>
<span id="cb2-53"><a href="#cb2-53"></a>        <span class="cf">pass</span></span>
<span id="cb2-54"><a href="#cb2-54"></a>    </span>
<span id="cb2-55"><a href="#cb2-55"></a>    <span class="kw">def</span> game_over(<span class="va">self</span>):</span>
<span id="cb2-56"><a href="#cb2-56"></a>        <span class="bu">print</span>(<span class="st">"Bye, Bye, Baby!"</span>)</span>
<span id="cb2-57"><a href="#cb2-57"></a>        pygame.quit()</span>
<span id="cb2-58"><a href="#cb2-58"></a>        sys.exit()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Die gesamte Initialisierung von Pygame wird jetzt im Konstruktor der <code>GameWorld()</code> vorgenommen und ist vom Rest des Programms isoliert. Auch die Eventbehandlung habe ich in die einzelnen Klassen verlagert, das Hauptprogramm weiß nichts mehr davon.</p>
<p>Die Befehle der Methode <code>reset()</code> könnten theoretisch auch im Konstruktor stehen. Ich habe sie jedoch separiert, da sie unter Umständen bei einem Neustart des Spieles (ohne daß das Spiel beendet wird) noch einmal aufgerufen werden müssen. Und die <code>run()</code>-Methode faßt einfach nur die Methoden <code>events()</code>, <code>update()</code> und <code>draw()</code> in einem Aufruf zusammen.</p>
<p>Auch die Aufrufe in <code>game_over()</code> sind in eine eigene Methode ausgelagert, da sie – wenn ein Spiel an mehreren Stellen beendet werden kann – ebenfalls mehrmals benötigt werden könnten.</p>
<p>Die Methoden <code>start_screen()</code>, <code>win_screen()</code> und <code>loose_screen()</code> habe ich leergelassen. Sie können bei Bedarf implementiert werden.</p>
<p>Um das alles mit Leben zu füllen, habe ich als minimale, aber notwendige Ergänzung die Klasse <code>Player()</code> implementiert (denn was ist ein Spiel ohne Spieler?):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a><span class="kw">class</span> Player(pygame.sprite.Sprite):</span>
<span id="cb3-2"><a href="#cb3-2"></a>    </span>
<span id="cb3-3"><a href="#cb3-3"></a>    <span class="kw">def</span> <span class="fu">__init__</span>(<span class="va">self</span>):</span>
<span id="cb3-4"><a href="#cb3-4"></a>        pygame.sprite.Sprite.<span class="fu">__init__</span>(<span class="va">self</span>)</span>
<span id="cb3-5"><a href="#cb3-5"></a>        <span class="co"># Load Images</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>        <span class="va">self</span>.images <span class="op">=</span> []</span>
<span id="cb3-7"><a href="#cb3-7"></a>        <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span> (<span class="dv">2</span>):</span>
<span id="cb3-8"><a href="#cb3-8"></a>            img <span class="op">=</span> pygame.image.load(os.path.join(DATAPATH,</span>
<span id="cb3-9"><a href="#cb3-9"></a>                         <span class="st">"planegreen_"</span> <span class="op">+</span> <span class="bu">str</span>(i) <span class="op">+</span> <span class="st">".png"</span>)) <span class="op">\</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>                         .convert_alpha()</span>
<span id="cb3-11"><a href="#cb3-11"></a>            <span class="va">self</span>.images.append(img)</span>
<span id="cb3-12"><a href="#cb3-12"></a>        <span class="va">self</span>.image <span class="op">=</span> <span class="va">self</span>.images[<span class="dv">0</span>]</span>
<span id="cb3-13"><a href="#cb3-13"></a>        <span class="va">self</span>.rect <span class="op">=</span> <span class="va">self</span>.image.get_rect()</span>
<span id="cb3-14"><a href="#cb3-14"></a>        <span class="va">self</span>.x <span class="op">=</span> <span class="dv">75</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>        <span class="va">self</span>.y <span class="op">=</span> <span class="dv">250</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>        <span class="va">self</span>.frame <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>        <span class="va">self</span>.animation_cycle <span class="op">=</span> <span class="dv">20</span></span>
<span id="cb3-18"><a href="#cb3-18"></a>        <span class="va">self</span>.animation_time <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb3-19"><a href="#cb3-19"></a>        <span class="va">self</span>.updown <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb3-20"><a href="#cb3-20"></a>  </span>
<span id="cb3-21"><a href="#cb3-21"></a>    <span class="kw">def</span> update(<span class="va">self</span>):</span>
<span id="cb3-22"><a href="#cb3-22"></a>        keys <span class="op">=</span> pygame.key.get_pressed()</span>
<span id="cb3-23"><a href="#cb3-23"></a>        <span class="cf">if</span> keys[pygame.K_UP]:</span>
<span id="cb3-24"><a href="#cb3-24"></a>            <span class="cf">if</span> <span class="va">self</span>.y <span class="op">&gt;</span> <span class="dv">20</span>:</span>
<span id="cb3-25"><a href="#cb3-25"></a>                <span class="va">self</span>.y <span class="op">-=</span> <span class="va">self</span>.updown</span>
<span id="cb3-26"><a href="#cb3-26"></a>        <span class="cf">elif</span> keys[pygame.K_DOWN]:</span>
<span id="cb3-27"><a href="#cb3-27"></a>            <span class="cf">if</span> <span class="va">self</span>.y <span class="op">&lt;</span> HEIGHT <span class="op">-</span> <span class="dv">20</span>:</span>
<span id="cb3-28"><a href="#cb3-28"></a>                <span class="va">self</span>.y <span class="op">+=</span> <span class="va">self</span>.updown</span>
<span id="cb3-29"><a href="#cb3-29"></a>        <span class="cf">else</span>:</span>
<span id="cb3-30"><a href="#cb3-30"></a>            <span class="va">self</span>.y <span class="op">+=</span> <span class="dv">0</span></span>
<span id="cb3-31"><a href="#cb3-31"></a>        <span class="va">self</span>.rect.center <span class="op">=</span> (<span class="va">self</span>.x, <span class="va">self</span>.y)</span>
<span id="cb3-32"><a href="#cb3-32"></a>        <span class="va">self</span>.animation_cycle <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb3-33"><a href="#cb3-33"></a>        <span class="cf">if</span> <span class="va">self</span>.animation_cycle <span class="op">&gt;=</span> <span class="va">self</span>.animation_time:</span>
<span id="cb3-34"><a href="#cb3-34"></a>            <span class="va">self</span>.animation_cycle <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-35"><a href="#cb3-35"></a>            <span class="va">self</span>.frame <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb3-36"><a href="#cb3-36"></a>            <span class="cf">if</span> <span class="va">self</span>.frame <span class="op">&gt;</span> <span class="dv">1</span>:</span>
<span id="cb3-37"><a href="#cb3-37"></a>                <span class="va">self</span>.frame <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb3-38"><a href="#cb3-38"></a>        <span class="va">self</span>.image <span class="op">=</span> <span class="va">self</span>.images[<span class="va">self</span>.frame]</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Auch hier fällt auf, daß ich in der <code>update()</code>-Methode die Event-Behandlung vom übrigen Programm isoliert habe. Die Events, die den Player betreffen, werden in der Klasse <code>Player()</code> behandelt – und sonst nirgendwo. Das Hauptprogramm ist daher entsprechend knapp ausgefallen:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource python number-lines code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1"></a><span class="im">import</span> pygame</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="im">from</span> pygame.<span class="bu">locals</span> <span class="im">import</span> <span class="op">*</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="im">import</span> os, sys</span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="im">from</span> random <span class="im">import</span> randint</span>
<span id="cb4-5"><a href="#cb4-5"></a></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="co"># Hier wird der Pfad zum Verzeichnis der Assets gesetzt</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>DATAPATH <span class="op">=</span> os.path.join(os.getcwd(), <span class="st">"data"</span>)</span>
<span id="cb4-8"><a href="#cb4-8"></a></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="co"># Konstanten deklarieren</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>WIDTH, HEIGHT <span class="op">=</span> <span class="dv">640</span>, <span class="dv">480</span></span>
<span id="cb4-11"><a href="#cb4-11"></a>TITLE <span class="op">=</span> <span class="st">"Pizzaplane Objektorientiert"</span></span>
<span id="cb4-12"><a href="#cb4-12"></a>FPS <span class="op">=</span> <span class="dv">60</span></span>
<span id="cb4-13"><a href="#cb4-13"></a></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="co"># Farben</span></span>
<span id="cb4-15"><a href="#cb4-15"></a>BG_COLOR <span class="op">=</span> (<span class="dv">0</span>, <span class="dv">80</span>, <span class="dv">125</span>)    <span class="co"># Mittelblau</span></span>
<span id="cb4-16"><a href="#cb4-16"></a></span>
<span id="cb4-17"><a href="#cb4-17"></a><span class="co">### Hier kommen die Klassen-Definitonen hin</span></span>
<span id="cb4-18"><a href="#cb4-18"></a><span class="co"># Snip</span></span>
<span id="cb4-19"><a href="#cb4-19"></a><span class="co">### Ende der Klassendefinitionen</span></span>
<span id="cb4-20"><a href="#cb4-20"></a></span>
<span id="cb4-21"><a href="#cb4-21"></a><span class="co"># Hauptprogramm</span></span>
<span id="cb4-22"><a href="#cb4-22"></a>w <span class="op">=</span> GameWorld()</span>
<span id="cb4-23"><a href="#cb4-23"></a>w.start_screen()</span>
<span id="cb4-24"><a href="#cb4-24"></a>w.reset()</span>
<span id="cb4-25"><a href="#cb4-25"></a>w.run()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Damit bin ich sehr zufrieden. Es entspricht meinen Vorstellungen eines objektorientierten Spieleframeworks. Jetzt muß ich »nur« noch testen, wie es sich in der Praxis bewährt. Dazu werde ich als erstes mein Pizzaplane-Spiel darauf anwenden. Schaun wir mal…</p>
<p>Den <a href="https://github.com/kantel/pygameprojects/blob/master/boilerplate/boilerplateoop_msprites.py">Quellcode</a> und die <a href="https://github.com/kantel/pygameprojects/tree/master/boilerplate/data">Assets</a> gibt es wie immer auch in meinem GitHub-Repositorium.</p>




<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Fußnoten</h2>

<ol>
<li id="fn1"><p>Eigentlich wundert das nicht, denn Greenfoot ist ein Java-Framework, und in Java muß man sich schon gewaltig anstrengen, um der Objektorientierung zu entgehen. Daß dies jedoch nicht ganz unmöglich ist, beweist aber <a href="http://cognitiones.kantel-chaos-team.de/programmierung/creativecoding/processing/processing.html">Processing</a>.&nbsp;🤓<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="kantel/kantel.github.io" data-repo-id="R_kgDOIjiXMQ" data-category="General" data-category-id="DIC_kwDOIjiXMc4CS_hh" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>