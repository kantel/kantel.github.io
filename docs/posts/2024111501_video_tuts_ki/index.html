<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jörg Kantel">

<title>Konsistente Charaktere mit KI (und mehr) – Video-Tutorials zum Wochenende – Der Schockwellenreiter</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<script data-goatcounter="https://kantel.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Der Schockwellenreiter</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Suchen"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navigation umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Über den Schockwellenreiter</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kantel/kantel.github.io"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.social/@kantel"> <i class="bi bi-mastodon" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Konsistente Charaktere mit KI (und mehr) – Video-Tutorials zum Wochenende</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Scenario</div>
    <div class="quarto-category">Flux.1</div>
    <div class="quarto-category">Stable Diffusion</div>
    <div class="quarto-category">Bilder</div>
    <div class="quarto-category">Video</div>
    <div class="quarto-category">Leonardo AI</div>
    <div class="quarto-category">Tensor Art</div>
    <div class="quarto-category">OpenArt.ai</div>
    <div class="quarto-category">Künstliche Intelligenz</div>
    <div class="quarto-category">Interactive Fiction</div>
    <div class="quarto-category">Spieleprogrammierung</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor:in</div>
    <div class="quarto-title-meta-contents">
             <p>Jörg Kantel </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Veröffentlichungsdatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">15. November 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><a href="https://www.flickr.com/photos/schockwellenreiter/54088544541/"><img src="images/alice-b.jpg" class="img-fluid"></a></p>
<p>Noch immer hält mich das Thema »Konsistente Charaktere mit bildgenerierender, gekünstelter Intelligenzia« fest in seine Krallen. Ich bin der Meinung, daß ich noch lange nicht alles erkundet habe, was mit der Software möglich ist. Zumal sich herausgestellt hat, daß das neue <a href="https://de.wikipedia.org/wiki/FLUX.1">Flux.1</a> dabei tatsächlich so etwas wie ein <a href="https://kantel.github.io/posts/2024102201_flux_scenario/">echter Game Changer</a> ist. Um mich hier noch weiter einzuarbeiten, habe ich für dieses Wochenende wieder in paar Video-Tutorials herausgesucht, die Euch und mir die Erkundung erleichtern sollen.</p>
<iframe class="if16_9" src="https://www.youtube.com/embed/XL7Ty8Q0JYg?si=CG-hVtaLhdOOPqZy" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
<p>Ich beginne mit <a href="ttp://cognitiones.kantel-chaos-team.de/technikgeschichte/rechnerundnetze/scenario.html">Scenario</a>, die bildgenerierende KI-Software, der ich derzeit am meisten vertraue. Vor allem, weil sie sich nach einer anfänglichen Vorsicht mit wachsender Begeisterung auf das Thema »Flux.1« gestürzt hat und fast täglich neue Flux-Loras hochlädt. Aber auch bei den hauseigenen Video-Tutorials kommen fast täglich neue hinzu. Die jüngsten und in meinen Augen interessantesten sind diese (ein paar davon hatte ich auf diesen Seiten schon einmal erwähnt, aber ich wollte sie wegen der besseren Übersicht noch einmal geschlossen hier aufführen):</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=R0qWML4j3XQ">Scenario Live AI Painting with Custom Models</a> (Scenario Live sollte ich mir dringend auch noch genauer anschauen)</li>
<li>Scenario Enhance (<a href="https://www.youtube.com/watch?v=eJcCiKTe4cE">Part 1</a> und <a href="https://www.youtube.com/watch?v=DGPwXjxldSM">Part 2</a>)</li>
<li><a href="https://www.youtube.com/watch?v=Aa--ckTnTbc">Transform Your Sketches into Artwork</a></li>
<li><a href="https://www.youtube.com/watch?v=aQZpeeLUXWs">Train A Conistent Character Model</a></li>
<li><a href="https://www.youtube.com/watch?v=v5mTB-Bggio">Exploring Model Merging in Scenario</a></li>
<li>Generating Multi-Character Scenes (<a href="https://www.youtube.com/watch?v=XL7Ty8Q0JYg">Part 1</a> und <a href="https://www.youtube.com/watch?v=XL7Ty8Q0JYg">Part 2</a>)</li>
<li><a href="https://www.youtube.com/watch?v=T8G73YoblQA">Train A Style Model</a></li>
<li><a href="https://www.youtube.com/watch?v=aN3tAf8c4iA">Quick Guide To Asset Reskinning in Scenario</a></li>
<li><a href="https://www.youtube.com/watch?v=jF3yza5aQhc">Generate Training Datasets</a></li>
<li><a href="https://www.youtube.com/watch?v=ve_Sw8ozsCk">Modify Facial Expressions in Scenario</a></li>
<li><a href="https://www.youtube.com/watch?v=DeTKhzk1B3Y">Merging Style Models on Scenario</a> (»Multi-LoRA«)</li>
<li><a href="https://www.youtube.com/watch?v=tqabZMOCu7E">Assess and Refine Your Custom-Trained Models</a></li>
<li><a href="https://www.youtube.com/watch?v=QfLV3keTvMc">Introducing the Scenario Canvas</a></li>
<li>ControlNet: <a href="https://www.youtube.com/watch?v=VOTZVQxyX1Q">A Guide to Perfect Image Composition</a></li>
<li><a href="https://www.youtube.com/watch?v=rdGe376gR40">Use Character Reference in Scenario to Create Consistent Character Designs</a></li>
<li><a href="https://www.youtube.com/watch?v=XXInyYtNin0">Design Isometric Buildings with Scenario Canvas</a></li>
<li><a href="https://www.youtube.com/watch?v=m4DYYwen9-I">Use Style Reference in Scenario to Create Cohesive Visuals</a></li>
<li><a href="https://www.youtube.com/watch?v=XTCpr-CqQrE">Effortlessly Remove Backgrounds in Scenario</a></li>
<li><a href="https://www.youtube.com/watch?v=OTxR1KvHSyE">Manage Your Scenario Content Efficiently</a></li>
</ul>
<p>All diese Videos sind in den letzten zwei Monaten hochgeladen worden und daher verdammt aktuell. Und auch wenn die einzelnen Filmchen recht kurz geraten sind, ist ihr Inhalt doch so kompakt und vollgestopft mit Informationen, daß das Durcharbeiten schon einige Tage, wenn nicht gar Wochen in Anspruch nehmen wird.</p>
<iframe class="if16_9" src="https://www.youtube.com/embed/zKy-57ZVEjs?si=nCQFg4-JN8iHYokk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
<p>Es ist aber nicht nur Scenario, das Flux.1 in sein Portfolio aufgenommen hat, andere Online-Dienste – wie zum Beispiel <a href="http://cognitiones.kantel-chaos-team.de/technikgeschichte/rechnerundnetze/tensorart.html">Tensor Art</a>, <a href="http://cognitiones.kantel-chaos-team.de/technikgeschichte/rechnerundnetze/leonardoai.html">Leonardo AI</a> oder das von mir <a href="https://kantel.github.io/posts/2024110701_openart_ai/">frisch</a> <a href="https://kantel.github.io/posts/2024110702_openart_ai%20_cont/">entdeckte</a> <a href="http://cognitiones.kantel-chaos-team.de/technikgeschichte/rechnerundnetze/tensorart.html">OpenArt.ai</a> – bieten diesen KI-Bildgenerator ebenfalls an. Daher gibt es jetzt noch ein paar Videos, die sich ebenfalls mit Flux.1, aber mit anderen Plattformen beschäftigen (ohne ComfUI, das ist noch ein anderes Thema, in das ich mich einarbeiten muß):</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=FaKzO8rlLwY">FLUX Bilder-KI aus Deutschland</a> 👉🏻 Vergleich mit Midjourney, SDXL &amp; DALL-E 3</li>
<li><a href="https://www.youtube.com/watch?v=NA_NpkIYsEo">Flux Pulid</a> - Create Consistent Characters From A Single Image - No Lora Needed!</li>
<li><a href="https://www.youtube.com/watch?v=5SEPIVugpLs">OpenArt.ai Tutorial 2024</a>: How to Use OpenArt to Create AI Art and Images</li>
<li><a href="https://www.youtube.com/watch?v=zKy-57ZVEjs">How to Create Consistent Characters with Leonardo AI</a></li>
<li>OmniGen: <a href="https://www.youtube.com/watch?v=PCL9SAlHqzw">This free AI image editor changes everything</a></li>
</ul>
<iframe class="if16_9" src="https://www.youtube.com/embed/kyKIdhRxvI4?si=XSdkLlO1F15u_W_E" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>
<p><em>Last but not least</em> sind dann auch noch die KI-Videogeneratoren als der neueste heiße Scheiß. Ich denke, ich werde irgendwann auch auf diesem Zug aufspringen müssen. Damit ich darauf vorbereitet bin, möchte ich – wenn es meine Zeit erlaubt – mir auch noch diese Videos reinziehen, um mir einen ersten Überblick zu verschaffen:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=fBwDgeAiWJQ">This NEW Game-Changing Image to Video AI is better than MINIMAX &amp; KLING AI</a></li>
<li><a href="https://www.youtube.com/watch?v=he8nLSvY-yU">The BEST open-source AI video generator is here</a> (beats Runway Gen3)</li>
<li>Animate Everything: <a href="https://www.youtube.com/watch?v=D5eYB64CmHA">These 6 FREE AI Animation Tools Will Bring Your Images To Life</a></li>
<li>Runway is Way Too EXPENSIVE: <a href="https://www.youtube.com/watch?v=0_3abhe4Dyc">I Tried The FREE Open Source Alternative</a></li>
<li><a href="https://www.youtube.com/watch?v=2Qb_XnEUcY8">The Scary Truth Behind AI’s Emotional Power</a></li>
<li>Flux Images To Cinematic AI Video: <a href="https://www.youtube.com/watch?v=kyKIdhRxvI4">A Multi-Tools Workflow Create AI Video Scenes</a></li>
<li><a href="https://www.youtube.com/watch?v=HkjPn6VTkLI">YouTube Automation With AI Films/Videos</a> – 3 Hours Course</li>
<li><a href="https://www.youtube.com/watch?v=llLcAGEJWto">Haiper AI 2.0 Tutorial</a>: Best AI Video Generator</li>
<li>Runway Act 1 ML: <a href="https://www.youtube.com/watch?v=Osm5ko0CRbE">This New AI Animation Tool is a Gamechanger</a></li>
</ul>
<p>Die letztgenannten Videos habe ich mir selber noch nicht angeschaut, habe also keine Ahnung, was Euch und/oder mich da erwartet. Es ist auf jeden Fall ein umfangreiches Programm, sollte es also über das Wochenende keine Updates hier im <del>Blog</del> Kiritzelheft geben, wißt Ihr, womit ich beschäftigt bin. <em>Still digging!</em></p>
<hr>
<p><strong>Bild</strong>: <em><a href="https://www.flickr.com/photos/schockwellenreiter/54088544541/">Little Girl Alice</a></em>, erstellt mit <a href="http://cognitiones.kantel-chaos-team.de/technikgeschichte/rechnerundnetze/scenario.html">Scenario</a>. Prompt: »<em>Little Girl Alice with blonde hair and pigtails, big blue eyes, she wears a blue dress and a white apron, alice looks from a hill at a wide landscape with a dreamy village and a small stream with a water mill</em>«, Modell: Flux LoRA, Style: Little Girl Alice.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/kantel\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="kantel/kantel.github.io" data-repo-id="R_kgDOIjiXMQ" data-category="General" data-category-id="DIC_kwDOIjiXMc4CS_hh" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->




</body></html>