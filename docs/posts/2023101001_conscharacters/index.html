<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.47">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jörg Kantel">

<title>Noch mehr über KI-generierte Bilder im Allgemeinen und konsistente Charaktere im Besonderen – Der Schockwellenreiter</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<script data-goatcounter="https://kantel.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Der Schockwellenreiter</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Suchen"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Navigation umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Über den Schockwellenreiter</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kantel/kantel.github.io"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.social/@kantel"> <i class="bi bi-mastodon" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Noch mehr über KI-generierte Bilder im Allgemeinen und konsistente Charaktere im Besonderen</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Bilder</div>
    <div class="quarto-category">Künstliche Intelligenz</div>
    <div class="quarto-category">Interactive Fiction</div>
    <div class="quarto-category">Twine</div>
    <div class="quarto-category">RenPy</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor:in</div>
    <div class="quarto-title-meta-contents">
             <p>Jörg Kantel </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Veröffentlichungsdatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">10. Oktober 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p><a href="https://www.flickr.com/photos/schockwellenreiter/53248614674/"><img src="images/corgiman-b.jpg" class="img-fluid"></a></p>
<p>Es ist offensichtlich, daß mich das Thema »Bildergenerierung mit Hilfe gekünstelter Intelligenzia« fasziniert. Und so bin ich auch dank unserer aller Datenkrake über weitere Videos gestolpert, die ich interessant fand, aber mir noch nicht alle angeschaut habe. Dennoch möchte ich sie – auch um meinen überquellenden Feedreader ein wenig aufzuräumen – Euch hier kurz vorstellen.</p>
<p>Eines solltet Ihr allerdings berückssichtigen. Das Thema <em>Künstliche Intelligenz</em> hat einen ähnlichen Hype ausgelöst wie seinerzeit das Thema <em><a href="https://de.wikipedia.org/wiki/Non-Fungible_Token">Non-Fungible Token</a></em> (NFT). Und so wie ich damals schon Ideen entwickelt hatte, wie man mit den Mitteln von NFT denen, die vom Hype profitieren wollen und wie <em>Dagobert Duck</em> mit Dollarzeichen in den Augen herumrennen, den <a href="http://blog.schockwellenreiter.de/2022/03/2022031101.html">Stinkefinger zeigen</a> kann, so möchte ich auch nun die Methoden nutzen, irgendetwas damit anzustellen, was kreativ ist, ohne auf den Profit zu schielen. Meine Idee, mit den so generierten Bildern interaktive Geschichten mit <a href="http://blog.schockwellenreiter.de/2022/03/2022031101.html">Twine</a> und/oder <a href="http://cognitiones.kantel-chaos-team.de/multimedia/spieleprogrammierung/renpy.html">Ren’Py</a> zu erzählen, ist ein erster Schritt in diese Richtung.</p>
<p>Dennoch: Etliche der Macherinnen und Macher der vorgestellten Videos schielen ganz gewaltig auf Einnahmen, die sie erhoffen, was sich teilweise bis in die Namen der Video-Kanäle niederschlägt. Versucht, dieses zu ignorieren und Euch auf die kreativen Möglichkeiten zu fokussieren, die in diesen Programmen stecken (können).</p>
<p>Fange ich erst einmal mit <strong><a href="http://cognitiones.kantel-chaos-team.de/technikgeschichte/rechnerundnetze/leonardoai.html">Leonardo AI</a></strong> an. Dieser auf <a href="http://cognitiones.kantel-chaos-team.de/technikgeschichte/rechnerundnetze/stablediffusion.html">Stable Diffusion</a> basierender, in der Grundversion kostenlos zu nutzender Bildgenerator ist ein vielversprechender Kandidat, besonders, da man mit den 150 »Credits«, die man in der keostenlosen Version an jedem Tag neu zur Verfügung hat, schon einiges anstellen kann. Das einstündige Video »<a href="https://www.youtube.com/watch?v=E9qVYB8YSqY">How to Use Leonardo AI</a>« will das <strong>ultimative Tutorial</strong> zu Leonardo AI sein. Schaun wir mal, was von diesem großspurigen Versprechen zu halten ist.</p>
<p>Da ist dann ja noch das als Klassiker gehandelte <strong><a href="http://cognitiones.kantel-chaos-team.de/technikgeschichte/rechnerundnetze/midjourney.html">Midjourney</a></strong>. Irgendjemand hat mich zu Midjourney eingeladen, so daß ich mit dem Teil erst einmal 25 Bilder kostenlos erstellen (oder 25 »Credits« verbrauchen? – so genau blicke ich da nicht durch) darf. Danach müßte ich blechen, aber 25 Bilder/Credits sollten für einen ersten Test reichen. Das Video »<a href="https://www.youtube.com/watch?v=Cmoa4mYOEtI">How to use AI to Create Consistent Characters for a Children’s Book using Midjourney AI</a>« könnte dabei hilfreich sein. Midjourney kann man mit der Discord-Desktop-App auch außerhalb des Browsers nutzen. Sind die 25 Credits jedoch verbraucht, muß man (trotz »Einladung« auch ich) für die weitere Nutzung dann ein Abonnement abschließen (mindestens US-$&nbsp;8/Monat bei einer Laufzeit von einem Jahr). Ich glaube nicht, daß ich mir diese knapp 100&nbsp;€ ans Bein binden werde. Da müßte bei meinen Tests schon wirkich etwas Ultra-Cooles herauskommen.</p>
<p>Trotz allem, <strong>konsistente Charaktere</strong>, ein Feature, daß auch ich für meine angedachten Anwendungen dringend benötige, scheinen bei KI-generierten Bilder ein Problem zu sein, wobei es mindestens die aktuellste Version 5.2 von Midjourney gelöst haben will (siehe: <a href="https://www.youtube.com/watch?v=HMtIQfIhsk4">Character Consistency SOLVED in Midjourney 5.2</a>). Es gibt etliche Videos, die ebenfalls Lösungen (auch für andere Programme) versprechen. Eine Auswahl:</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=tkNuEwW2jqo">Keep Character Consistency in Comics</a> 👩🏽‍💻 benutzt <a href="https://www.comicsmaker.ai/">ComicsMaker.ai</a> als Bildgenerator. Notiz an mich: Ebenfalls testen!</li>
<li>Noch einmal Kinderbücher – noch einmal Midjourney: <a href="https://www.youtube.com/watch?v=OmIfQn0koIw">Create Consistent Characters Like A Pro For Children’s Storybooks With Midjourney V5.2</a>.</li>
<li>Geht es auch mit Leonardo AI? Das fragt <em>Monzon Media</em> in ihrem Video »<a href="https://www.youtube.com/watch?v=IPJQO5snMd4">Leonardo AI Are Consistent Characters Possible?</a>. Ihr <a href="https://www.youtube.com/@MonzonMedia/playlists">Kanal</a> ist übrigens unter anderem eine Fundgrube für Stable Diffusion-Tutorials. Ich habe ihn daher abonniert.</li>
<li>Weiter mit Leonardo AI: <a href="https://www.youtube.com/watch?v=2rdYVJb295A">How to Create Consistent Character For Story Book With Leonardo AI – Quick and Easy</a>, <a href="https://www.youtube.com/watch?v=skIj3lXETKA">Consistent Characters in LeonardoAI</a> und <a href="https://www.youtube.com/watch?v=bEqmct5TjK0">Leonardo Ai Consistent Character for KDP Book</a>. Achtung: Dollarzeichen-Alarm!</li>
<li>Und Leonardo AI zum letzten: Konsistente Charaktere: <a href="https://www.youtube.com/watch?v=06CT4w0PxZE">Nutze Leonardo AI und ChatGPT als GRATIS Midjourney Alternative</a>.</li>
</ul>
<p><strong>Noch einen Schritt weiter sind KI-Avatare, die sprechen</strong>: Eine erste Einführung gibt das Video »<a href="https://www.youtube.com/watch?v=RV2r6KaUWwk">Create TALKING Photo AI AVATAR in 2 Minutes Using FREE AI TOOLS</a>«. Die dabei verwendete Software ist <a href="https://clipdrop.co/stable-diffusion">Clipdrop</a> für die Bildbearbeitung (das übrigens seine Wartungspause beendet hat), <a href="https://elevenlabs.io/">ElevenLabs</a> für die Sprachgenerierung und der <a href="https://huggingface.co/spaces/vinthony/SadTalker">😭 SadTalker</a> für die mehr oder weniger lippensynchrone Animation des Bildes. Alle drei Anwendungen sind kostenlos zu nutzen und scheinen – wenn ich dem Video glauben darf – ziemlich coole Ergebnisse zu produzieren. Ich habe sie deshalb auf meiner Testliste ganz nach oben gesetzt.</p>
<p>Und dann ist da noch ein <em>new Kid on the (free) Block</em>: <strong><a href="https://openai.com/dall-e-3">DALL-E 3</a></strong> ist draußen und es soll komplett kostenlos zu nutzen sein, wie das zehnminütige Video »<a href="https://www.youtube.com/watch?v=MmWdZIgB34U">DALL-E 3 is Out Now and Completely FREE to Use!</a> von <em>Matt Wolfe</em> verspricht. Ein weiterer Kandidat auf meiner stetig wachsenden Liste der zu testenden Applikationen?</p>
<p><strong>War sonst noch was?</strong> Ach ja, Künstliche Intelligenz trifft Generative Art: <a href="https://www.astronaut.horse/">Astronaut Horse</a> ist ein ziemlich geniales Projekt. <em>Tom Betthauser</em> stellte es in seinem fünfzigminütigen Videovortrag »<a href="https://www.youtube.com/watch?v=9znqIzymWFE">Astronaut Horse: Stable Diffusion Artist Collaborations</a>« auf der <a href="https://thestrangeloop.com/">Strange Loop 2023</a> vor. Na bitte, ebenfalls ein Schritt in die Richtung, dem Hype den Stinkefinger zu zeigen, indem man ihn kreativ nutzt, ohne auf (s)einen Profit zu schielen.</p>
<hr>
<p><strong>Bannerbild</strong>: <em><a href="https://www.flickr.com/photos/schockwellenreiter/53248614674/">The Incredible Corgi-Man</a></em>, erstellt mit <a href="https://beta.dreamstudio.ai/generate">DreamStudio</a>. Prompt: »<em>a blonde woman in a bikini and a corgi-headed man in a business dress sitting in a bar on a table and drinking coffee</em>«. Style: Comic Book.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/kantel\.github\.io\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="kantel/kantel.github.io" data-repo-id="R_kgDOIjiXMQ" data-category="General" data-category-id="DIC_kwDOIjiXMc4CS_hh" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->




</body></html>