<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jörg Kantel">

<title>Der Schockwellenreiter - Pizzaplane mit JavaScript (P5.js), Stage 1: All Actors on Board</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Keine Treffer",
    "search-matching-documents-text": "Treffer",
    "search-copy-link-title": "Link in die Suche kopieren",
    "search-hide-matches-text": "Zusätzliche Treffer verbergen",
    "search-more-match-text": "weitere Treffer in diesem Dokument",
    "search-more-matches-text": "weitere Treffer in diesem Dokument",
    "search-clear-button-title": "Zurücksetzen",
    "search-detached-cancel-button-title": "Abbrechen",
    "search-submit-button-title": "Abschicken",
    "search-label": "Suchen"
  }
}</script>
<script data-goatcounter="https://kantel.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Der Schockwellenreiter</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Suchen"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Navigation umschalten" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">Über den Schockwellenreiter</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/kantel/kantel.github.io" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://mastodon.social/@kantel" rel="" target=""><i class="bi bi-mastodon" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Pizzaplane mit JavaScript (P5.js), Stage 1: All Actors on Board</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Spieleprogrammierung</div>
    <div class="quarto-category">JavaScript</div>
    <div class="quarto-category">P5.js</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor:in</div>
    <div class="quarto-title-meta-contents">
             <p>Jörg Kantel </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Veröffentlichungsdatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">16. Januar 2024</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.flickr.com/photos/schockwellenreiter/53468224814/"><img src="images/pizzaplanejsstage1-b.jpg" class="img-fluid figure-img"></a></p>
</figure>
</div>
<p>Auf ein Neues! Nachdem meine Versuche zum Ende des Jahres mit <a href="http://cognitiones.kantel-chaos-team.de/programmierung/creativecoding/processing/p5js.html">P5.js</a>, der JavaScript-Version von <a href="http://cognitiones.kantel-chaos-team.de/programmierung/creativecoding/processing/processing.html">Processing</a> recht erfolgreich waren, ein <a href="https://kantel.github.io/posts/2023122601_merry_xmas_p5js/">Weihnachtsszenario</a> und ein (ungefährliches) <a href="https://kantel.github.io/posts/2023123102_silvesterfeuerwerk/">Silvesterfeuerwerk</a> zu programmieren, habe ich Mut gefaßt und bin eine größere Aufgabe angegangen. Die Portierung meines (nie endgültig fertiggestellten) kleinen, grünen Pizzafliegers von Python (<a href="https://kantel.github.io/posts/2023010102_pizzaplane4/">Pygame-Version</a>, <a href="https://kantel.github.io/posts/2023032602_pizza_plane_with_pizzas/">Trinket/Processing.py-Version</a>) nach JavaScript/P5.js.</p>
<p>Denn ich bin der Überzeugung, daß der Browser das in absehbarer Zukunft wichtigste Frontend (nicht nur) für Spiele sein und bleiben wird. Und bei aller Sympathie hinkt hier Python doch stark hinterher: Zwar gibt es mit <a href="http://cognitiones.kantel-chaos-team.de/multimedia/spieleprogrammierung/pygbag.html">Pygbag</a> eine Bibliothek, die Pygame-Spiele nach WebAssembly übersetzt <a href="https://kantel.github.io/posts/2023060501_pygame_im_browser/">und sie so im Browser spielbar macht</a>, aber das hat (noch?) <a href="https://kantel.github.io/posts/2023060602_pygbag_nachschlag/">seine Tücken</a>, so treten zum Beispiel bei Tastatureingaben Konflikte mit dem Browser auf. Das gilt auch für <a href="http://cognitiones.kantel-chaos-team.de/programmierung/python/trinket.html">Trinket</a>, hier kommt noch verschärfend hinzu, daß ich bis heute nicht herausgefunden habe, wie man zusätzliche (Google-) Fonts DSGVO-konform in Trinket einbindet.</p>
<p>All diese Probleme hat JavaScript mit P5.js nicht, bei meiner <a href="https://kantel.github.io/posts/2023051401_dancing_crab_p5js_v2/">tanzenden Krabbe</a> zum Beispiel habe ich gezeigt, wie man sowohl das Problem mit den Tastatureingaben <a href="https://kantel.github.io/posts/2023051001_dancing_crab_p5js/">löst</a>, wie auch Google-Fonts lokal einbindet. So soll der Pizzaflieger in der P5.js-Version endlich komplettiert werden (mit <a href="https://kantel.github.io/posts/2023011001_pizzaplane_trailer/">Start</a>- und Ende-Screen und einem Head-Up-Display (HUD)).</p>
<p>Im ersten Stage habe ich erst einmal alle Akteure auf das Spielfeld geschickt. Das beginnt mit der Klasse <code>Background</code>, der ich dieses Mal zwei freie Hintergrundbilder (<a href="http://creativecommons.org/publicdomain/zero/1.0/">CC0</a>) des Users <em>rubberduck</em> von <a href="https://opengameart.org/content/another-background-made-from-glitch-assets">OpenGameArt.org</a> spendiert habe. Der besseren Übersicht wegen habe ich diese Klasse in einer eigenen Datei (<code>background.js</code>) untergebracht:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">class</span> Background {</span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a>    <span class="fu">constructor</span>(_x<span class="op">,</span> _y<span class="op">,</span> _im) {</span>
<span id="cb1-4"><a href="#cb1-4"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">=</span> _x<span class="op">;</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">=</span> _y<span class="op">;</span></span>
<span id="cb1-6"><a href="#cb1-6"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">startx</span> <span class="op">=</span> _x<span class="op">;</span></span>
<span id="cb1-7"><a href="#cb1-7"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">img</span> <span class="op">=</span> _im<span class="op">;</span></span>
<span id="cb1-8"><a href="#cb1-8"></a>    }</span>
<span id="cb1-9"><a href="#cb1-9"></a>  </span>
<span id="cb1-10"><a href="#cb1-10"></a>    <span class="fu">update</span>() {</span>
<span id="cb1-11"><a href="#cb1-11"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">-=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>      <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">&lt;=</span> <span class="op">-</span>bgWidth) {</span>
<span id="cb1-13"><a href="#cb1-13"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">=</span> bgWidth<span class="op">;</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>      }</span>
<span id="cb1-15"><a href="#cb1-15"></a>  </span>
<span id="cb1-16"><a href="#cb1-16"></a>    }</span>
<span id="cb1-17"><a href="#cb1-17"></a>  </span>
<span id="cb1-18"><a href="#cb1-18"></a>    <span class="fu">display</span>() {</span>
<span id="cb1-19"><a href="#cb1-19"></a>      <span class="fu">image</span>(<span class="kw">this</span><span class="op">.</span><span class="at">img</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">x</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb1-20"><a href="#cb1-20"></a>    }</span>
<span id="cb1-21"><a href="#cb1-21"></a>  </span>
<span id="cb1-22"><a href="#cb1-22"></a>  }</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Diese und alle anderen Bilder werden in der Funktion <code>preload()</code> geladen.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb2-1"><a href="#cb2-1"></a><span class="kw">function</span> <span class="fu">preload</span>() {</span>
<span id="cb2-2"><a href="#cb2-2"></a>  planImages[<span class="dv">0</span>] <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/planegreen_1.png"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a>  planImages[<span class="dv">1</span>] <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/planegreen_2.png"</span>)</span>
<span id="cb2-4"><a href="#cb2-4"></a>  pizzaImg <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/pizza.png"</span>)</span>
<span id="cb2-5"><a href="#cb2-5"></a>  bg1  <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/background02a_2.png"</span>)</span>
<span id="cb2-6"><a href="#cb2-6"></a>  bg2  <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/background02b_2.png"</span>)</span>
<span id="cb2-7"><a href="#cb2-7"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Diese Funktion wird in P5.js vor <code>setup()</code> aufgerufen und verhindert, daß die Bilder asynchron geladen werden, also das Skript unter Umständen weiterläuft, bevor alle Assets vorhanden sind.</p>
<p>Dann kommen die Klassen für den Spieler und die Gegener, die ebenfalls eine eigene Datei (<code>sprites.js</code>) bekommen haben:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">// Class Plane</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="kw">class</span> Plane {</span>
<span id="cb3-3"><a href="#cb3-3"></a></span>
<span id="cb3-4"><a href="#cb3-4"></a>    <span class="fu">constructor</span>() {</span>
<span id="cb3-5"><a href="#cb3-5"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">=</span> <span class="dv">75</span><span class="op">;</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">=</span> <span class="dv">240</span><span class="op">;</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">img</span> <span class="op">=</span> planImages[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb3-8"><a href="#cb3-8"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">frame</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">speed</span> <span class="op">=</span> <span class="dv">5</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">anim</span>  <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>    }</span>
<span id="cb3-12"><a href="#cb3-12"></a>  </span>
<span id="cb3-13"><a href="#cb3-13"></a>    <span class="fu">update</span>() {</span>
<span id="cb3-14"><a href="#cb3-14"></a>      <span class="cf">if</span> (keyIsPressed) {</span>
<span id="cb3-15"><a href="#cb3-15"></a>        <span class="cf">if</span> (keyCode <span class="op">==</span> UP_ARROW) {</span>
<span id="cb3-16"><a href="#cb3-16"></a>          <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">&gt;</span> <span class="dv">10</span>) {</span>
<span id="cb3-17"><a href="#cb3-17"></a>            <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">-=</span> <span class="kw">this</span><span class="op">.</span><span class="at">speed</span><span class="op">;</span></span>
<span id="cb3-18"><a href="#cb3-18"></a>          }</span>
<span id="cb3-19"><a href="#cb3-19"></a>        }</span>
<span id="cb3-20"><a href="#cb3-20"></a>        <span class="cf">if</span> (keyCode <span class="op">==</span> DOWN_ARROW) {</span>
<span id="cb3-21"><a href="#cb3-21"></a>          <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">&lt;</span> height <span class="op">-</span> <span class="dv">100</span>) {</span>
<span id="cb3-22"><a href="#cb3-22"></a>            <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">+=</span> <span class="kw">this</span><span class="op">.</span><span class="at">speed</span><span class="op">;</span></span>
<span id="cb3-23"><a href="#cb3-23"></a>          }</span>
<span id="cb3-24"><a href="#cb3-24"></a>      }</span>
<span id="cb3-25"><a href="#cb3-25"></a>      <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb3-26"><a href="#cb3-26"></a>    }</span>
<span id="cb3-27"><a href="#cb3-27"></a>    <span class="kw">this</span><span class="op">.</span><span class="at">anim</span> <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb3-28"><a href="#cb3-28"></a>    <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">anim</span> <span class="op">&gt;=</span> maxAnim) {</span>
<span id="cb3-29"><a href="#cb3-29"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">anim</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-30"><a href="#cb3-30"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">frame</span> <span class="op">+=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb3-31"><a href="#cb3-31"></a>      <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">frame</span> <span class="op">&gt;=</span> <span class="dv">2</span>) {</span>
<span id="cb3-32"><a href="#cb3-32"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">frame</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-33"><a href="#cb3-33"></a>      }</span>
<span id="cb3-34"><a href="#cb3-34"></a>      <span class="kw">this</span><span class="op">.</span><span class="at">img</span> <span class="op">=</span> planImages[<span class="kw">this</span><span class="op">.</span><span class="at">frame</span>]<span class="op">;</span></span>
<span id="cb3-35"><a href="#cb3-35"></a>    }</span>
<span id="cb3-36"><a href="#cb3-36"></a>  </span>
<span id="cb3-37"><a href="#cb3-37"></a>  }</span>
<span id="cb3-38"><a href="#cb3-38"></a></span>
<span id="cb3-39"><a href="#cb3-39"></a>  <span class="fu">display</span>() {</span>
<span id="cb3-40"><a href="#cb3-40"></a>    <span class="fu">image</span>(<span class="kw">this</span><span class="op">.</span><span class="at">img</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">x</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb3-41"><a href="#cb3-41"></a>  }</span>
<span id="cb3-42"><a href="#cb3-42"></a>}</span>
<span id="cb3-43"><a href="#cb3-43"></a></span>
<span id="cb3-44"><a href="#cb3-44"></a><span class="co">// Class Enemy</span></span>
<span id="cb3-45"><a href="#cb3-45"></a><span class="kw">class</span> Enemy {</span>
<span id="cb3-46"><a href="#cb3-46"></a></span>
<span id="cb3-47"><a href="#cb3-47"></a>    <span class="fu">constructor</span>(_x<span class="op">,</span> _y<span class="op">,</span> _im) {</span>
<span id="cb3-48"><a href="#cb3-48"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">=</span> _x<span class="op">;</span></span>
<span id="cb3-49"><a href="#cb3-49"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">=</span> _y<span class="op">;</span></span>
<span id="cb3-50"><a href="#cb3-50"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">img</span> <span class="op">=</span> _im<span class="op">;</span></span>
<span id="cb3-51"><a href="#cb3-51"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">speed</span> <span class="op">=</span> <span class="fu">random</span>(<span class="dv">2</span><span class="op">,</span> <span class="dv">6</span>)<span class="op">;</span></span>
<span id="cb3-52"><a href="#cb3-52"></a>    }</span>
<span id="cb3-53"><a href="#cb3-53"></a></span>
<span id="cb3-54"><a href="#cb3-54"></a>    <span class="fu">reset</span>() {</span>
<span id="cb3-55"><a href="#cb3-55"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">=</span> width <span class="op">+</span> <span class="fu">random</span>(<span class="dv">30</span><span class="op">,</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb3-56"><a href="#cb3-56"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">y</span> <span class="op">=</span> <span class="fu">random</span>(<span class="dv">10</span><span class="op">,</span> height <span class="op">-</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb3-57"><a href="#cb3-57"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">speed</span> <span class="op">=</span> <span class="fu">random</span>(<span class="dv">2</span><span class="op">,</span> <span class="dv">6</span>)<span class="op">;</span></span>
<span id="cb3-58"><a href="#cb3-58"></a>    }</span>
<span id="cb3-59"><a href="#cb3-59"></a></span>
<span id="cb3-60"><a href="#cb3-60"></a>    <span class="fu">update</span>() {</span>
<span id="cb3-61"><a href="#cb3-61"></a>        <span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">-=</span> <span class="kw">this</span><span class="op">.</span><span class="at">speed</span><span class="op">;</span></span>
<span id="cb3-62"><a href="#cb3-62"></a>        <span class="cf">if</span> (<span class="kw">this</span><span class="op">.</span><span class="at">x</span> <span class="op">&lt;</span> <span class="op">-</span> <span class="dv">30</span>) {</span>
<span id="cb3-63"><a href="#cb3-63"></a>            <span class="kw">this</span><span class="op">.</span><span class="fu">reset</span>()<span class="op">;</span></span>
<span id="cb3-64"><a href="#cb3-64"></a>        }</span>
<span id="cb3-65"><a href="#cb3-65"></a>    }</span>
<span id="cb3-66"><a href="#cb3-66"></a></span>
<span id="cb3-67"><a href="#cb3-67"></a>    <span class="fu">display</span>() {</span>
<span id="cb3-68"><a href="#cb3-68"></a>        <span class="fu">image</span>(<span class="kw">this</span><span class="op">.</span><span class="at">img</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">x</span><span class="op">,</span> <span class="kw">this</span><span class="op">.</span><span class="at">y</span>)<span class="op">;</span></span>
<span id="cb3-69"><a href="#cb3-69"></a>    }</span>
<span id="cb3-70"><a href="#cb3-70"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Auch wenn es mein Bestreben eigentlich ist, daß »Hauptprogramm« durch die Auslagerung der Elemente in Klassen kurz zu halten, ist es doch knall fünfzig Zeilen lang geworden:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource javascript number-lines code-with-copy"><code class="sourceCode javascript"><span id="cb4-1"><a href="#cb4-1"></a><span class="kw">const</span> windowWidth <span class="op">=</span> <span class="dv">720</span><span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="kw">const</span> windowHeight <span class="op">=</span> <span class="dv">520</span><span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="kw">const</span> bgWidth <span class="op">=</span> <span class="dv">2056</span><span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4"></a><span class="kw">const</span> fps <span class="op">=</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb4-5"><a href="#cb4-5"></a><span class="kw">const</span> maxAnim <span class="op">=</span> <span class="dv">4</span><span class="op">;</span>      <span class="co">// Animation cycle</span></span>
<span id="cb4-6"><a href="#cb4-6"></a><span class="kw">const</span> noPizzas <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb4-7"><a href="#cb4-7"></a><span class="kw">let</span> planImages <span class="op">=</span> []</span>
<span id="cb4-8"><a href="#cb4-8"></a><span class="kw">let</span> plane<span class="op">;</span></span>
<span id="cb4-9"><a href="#cb4-9"></a><span class="kw">let</span> pizzas <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb4-10"><a href="#cb4-10"></a><span class="kw">let</span> pizzaImg<span class="op">;</span></span>
<span id="cb4-11"><a href="#cb4-11"></a><span class="kw">let</span> bg1<span class="op">,</span> bg2<span class="op">;</span></span>
<span id="cb4-12"><a href="#cb4-12"></a><span class="kw">let</span> back1<span class="op">,</span> back2<span class="op">;</span></span>
<span id="cb4-13"><a href="#cb4-13"></a></span>
<span id="cb4-14"><a href="#cb4-14"></a><span class="kw">function</span> <span class="fu">preload</span>() {</span>
<span id="cb4-15"><a href="#cb4-15"></a>  planImages[<span class="dv">0</span>] <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/planegreen_1.png"</span>)</span>
<span id="cb4-16"><a href="#cb4-16"></a>  planImages[<span class="dv">1</span>] <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/planegreen_2.png"</span>)</span>
<span id="cb4-17"><a href="#cb4-17"></a>  pizzaImg <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/pizza.png"</span>)</span>
<span id="cb4-18"><a href="#cb4-18"></a>  bg1  <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/background02a_2.png"</span>)</span>
<span id="cb4-19"><a href="#cb4-19"></a>  bg2  <span class="op">=</span> <span class="fu">loadImage</span>(<span class="st">"data/background02b_2.png"</span>)</span>
<span id="cb4-20"><a href="#cb4-20"></a>}</span>
<span id="cb4-21"><a href="#cb4-21"></a></span>
<span id="cb4-22"><a href="#cb4-22"></a><span class="kw">function</span> <span class="fu">setup</span>() {</span>
<span id="cb4-23"><a href="#cb4-23"></a>  myCanvas <span class="op">=</span> <span class="fu">createCanvas</span>(windowWidth<span class="op">,</span> windowHeight)<span class="op">;</span></span>
<span id="cb4-24"><a href="#cb4-24"></a>  myCanvas<span class="op">.</span><span class="fu">parent</span>(<span class="st">"sketch"</span>)<span class="op">;</span></span>
<span id="cb4-25"><a href="#cb4-25"></a>  <span class="fu">frameRate</span>(fps)<span class="op">;</span></span>
<span id="cb4-26"><a href="#cb4-26"></a>  back1 <span class="op">=</span> <span class="kw">new</span> <span class="fu">Background</span>(<span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> bg1)<span class="op">;</span></span>
<span id="cb4-27"><a href="#cb4-27"></a>  back2 <span class="op">=</span> <span class="kw">new</span> <span class="fu">Background</span>(bgWidth<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> bg2)<span class="op">;</span></span>
<span id="cb4-28"><a href="#cb4-28"></a>  <span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> noPizzas<span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb4-29"><a href="#cb4-29"></a>    <span class="kw">let</span> x <span class="op">=</span> width <span class="op">+</span> <span class="fu">random</span>(<span class="dv">30</span><span class="op">,</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb4-30"><a href="#cb4-30"></a>    <span class="kw">let</span> y <span class="op">=</span> <span class="fu">random</span>(<span class="dv">10</span><span class="op">,</span> height <span class="op">-</span> <span class="dv">100</span>)<span class="op">;</span></span>
<span id="cb4-31"><a href="#cb4-31"></a>    pizzas[i] <span class="op">=</span> <span class="kw">new</span> <span class="fu">Enemy</span>(x<span class="op">,</span> y<span class="op">,</span> pizzaImg)<span class="op">;</span></span>
<span id="cb4-32"><a href="#cb4-32"></a>  }</span>
<span id="cb4-33"><a href="#cb4-33"></a>  plane <span class="op">=</span> <span class="kw">new</span> <span class="fu">Plane</span>()<span class="op">;</span></span>
<span id="cb4-34"><a href="#cb4-34"></a>}</span>
<span id="cb4-35"><a href="#cb4-35"></a></span>
<span id="cb4-36"><a href="#cb4-36"></a><span class="kw">function</span> <span class="fu">draw</span>() {</span>
<span id="cb4-37"><a href="#cb4-37"></a>  <span class="fu">image</span>(bg1<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb4-38"><a href="#cb4-38"></a>  back1<span class="op">.</span><span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb4-39"><a href="#cb4-39"></a>  back2<span class="op">.</span><span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb4-40"><a href="#cb4-40"></a>  back1<span class="op">.</span><span class="fu">display</span>()<span class="op">;</span></span>
<span id="cb4-41"><a href="#cb4-41"></a>  back2<span class="op">.</span><span class="fu">display</span>()<span class="op">;</span></span>
<span id="cb4-42"><a href="#cb4-42"></a>  <span class="cf">for</span> (pizza <span class="kw">of</span> pizzas) {</span>
<span id="cb4-43"><a href="#cb4-43"></a>    pizza<span class="op">.</span><span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb4-44"><a href="#cb4-44"></a>    pizza<span class="op">.</span><span class="fu">display</span>()<span class="op">;</span></span>
<span id="cb4-45"><a href="#cb4-45"></a>  }</span>
<span id="cb4-46"><a href="#cb4-46"></a>  plane<span class="op">.</span><span class="fu">update</span>()<span class="op">;</span></span>
<span id="cb4-47"><a href="#cb4-47"></a>  plane<span class="op">.</span><span class="fu">display</span>()<span class="op">;</span></span>
<span id="cb4-48"><a href="#cb4-48"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Das ist aber in der Hauptsache den vielen Konstanten- und Variablen-Deklarationen zuzuschreiben (und der Funktion <code>preload()</code>, die vorab alle Assets lädt), die eigentliche Programmlogik findet tatsächlich in den Klassen-Deklarationen für die Objekte statt.</p>
<p>Die vorläufige <code>index.html</code>, die das Skript zum Testen braucht, muß natürlich alle Dateien einbinden:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource html number-lines code-with-copy"><code class="sourceCode html"><span id="cb5-1"><a href="#cb5-1"></a><span class="dt">&lt;!DOCTYPE </span>html<span class="dt">&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="kw">&lt;html</span> <span class="er">lang</span><span class="ot">=</span><span class="st">"en"</span><span class="kw">&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="kw">&lt;head&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>    <span class="kw">&lt;meta</span> <span class="er">charset</span><span class="ot">=</span><span class="st">"utf-8"</span> <span class="kw">/&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5"></a>    <span class="kw">&lt;meta</span> <span class="er">name</span><span class="ot">=</span><span class="st">"viewport"</span> <span class="er">content</span><span class="ot">=</span><span class="st">"width=device-width, initial-scale=1.0"</span><span class="kw">&gt;</span></span>
<span id="cb5-6"><a href="#cb5-6"></a></span>
<span id="cb5-7"><a href="#cb5-7"></a>    <span class="kw">&lt;title&gt;</span>🍕 Pizza Plane Stage 1 🍕<span class="kw">&lt;/title&gt;</span></span>
<span id="cb5-8"><a href="#cb5-8"></a></span>
<span id="cb5-9"><a href="#cb5-9"></a>    <span class="kw">&lt;link</span> <span class="er">rel</span><span class="ot">=</span><span class="st">"stylesheet"</span> <span class="er">type</span><span class="ot">=</span><span class="st">"text/css"</span> <span class="er">href</span><span class="ot">=</span><span class="st">"style.css"</span><span class="kw">&gt;</span></span>
<span id="cb5-10"><a href="#cb5-10"></a></span>
<span id="cb5-11"><a href="#cb5-11"></a>    <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"libraries/p5.min.js"</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb5-12"><a href="#cb5-12"></a>    <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"libraries/p5.sound.min.js"</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb5-13"><a href="#cb5-13"></a>  <span class="kw">&lt;/head&gt;</span></span>
<span id="cb5-14"><a href="#cb5-14"></a></span>
<span id="cb5-15"><a href="#cb5-15"></a>  <span class="kw">&lt;body&gt;</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>    <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"background.js"</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>    <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"sprites.js"</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb5-18"><a href="#cb5-18"></a>    <span class="kw">&lt;script</span> <span class="er">src</span><span class="ot">=</span><span class="st">"sketch.js"</span><span class="kw">&gt;&lt;/script&gt;</span></span>
<span id="cb5-19"><a href="#cb5-19"></a>    <span class="kw">&lt;div</span> <span class="er">id</span><span class="ot">=</span><span class="st">"sketch"</span><span class="kw">&gt;&lt;/div&gt;</span></span>
<span id="cb5-20"><a href="#cb5-20"></a>  <span class="kw">&lt;/body&gt;</span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="kw">&lt;/html&gt;</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Und im Vorgriff auf die spätere Verwendung in (m)einem <a href="http://cognitiones.kantel-chaos-team.de/webworking/staticsites/quarto.html">Quarto</a>-Dokument habe ich der Datei schon einmal ein <code>&lt;div id="sketch"&gt;</code> spendiert, dem im <code>setup()</code> des eigentlichen Skripts mit <code>myCanvas.parent("sketch")</code> der Ort zugewiesen wird, in der das Skript platziert wird.</p>
<div style="float: right; margin-left: 12px; margin-top: 6px;">
<a href="https://dpunkt.de/produkt/javascript-fuer-ungeduldige/"><img src="images/js02.jpg" class="img-fluid"></a>&nbsp;<a href="https://www.rheinwerk-verlag.de/programmieren-lernen-mit-javascript/"><img src="images/js01.jpg" class="img-fluid"></a>
</div>
<p>Ich hatte bisher viel Spaß mit der P5.js/JavaScript-Programmierung. Bei aufkommenden Fragen geholfen haben mir dabei vor allem die Bücher »<em><a href="https://www.rheinwerk-verlag.de/programmieren-lernen-mit-javascript/">Programmieren lernen mit JavaScript</a>. Spiele und Co.&nbsp;ganz easy – auch für Erwachsene</em>« von Stephan Elter, Bonn (Rheinwerk), 3. Auflage 2022, und »<em><a href="https://dpunkt.de/produkt/javascript-fuer-ungeduldige/">JavaScript für Ungeduldige</a>. Der schnelle Einstieg in modernes JavaScript</em>« von Cay Horstmann, Heidelberg (dpunkt) 2021. Das erste Buch hatte ich ausgewählt, weil es versprach, nicht nur für Kinder, sondern auch für Erwachsene zu sein (also direkt das Kind im Mann in mir ansprach), das zweite Buch natürlich, weil auf dem Titel das weiße Kaninchen aus »Alice im Wunderland« abgebildet war.</p>
<p>Ich bin und bleibe doch ein riesengroßes Spielkalb.</p>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Kopiert");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="kantel/kantel.github.io" data-repo-id="R_kgDOIjiXMQ" data-category="General" data-category-id="DIC_kwDOIjiXMc4CS_hh" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>